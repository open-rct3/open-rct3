// This file has been autogenerated from a class added in the UI designer.

using System;

using ObjCRuntime;
using Foundation;
using AppKit;

namespace Dumper;

public partial class MainWindow : NSWindow {
  public MainWindow(NativeHandle handle) : base(handle) {
    Delegate = new MainWindowDelegate();
  }

  public override bool CanBecomeMainWindow => true;
  public override bool CanBecomeVisibleWithoutLogin => false;

  public override void MakeMainWindow() {
    base.MakeMainWindow();
    MakeKeyAndOrderFront(this);
  }

  public override void BecomeMainWindow() {
    AppDelegate.Instance.MainWindow = this;
    base.BecomeMainWindow();
  }
}

internal class MainWindowDelegate : NSWindowDelegate {
  private string subtitle = "";

  public event EventHandler<string>? UpdateSubtitle;
  public event EventHandler? Closing;

  public override void WillClose(NSNotification notification) {
    Closing?.Invoke(this, EventArgs.Empty);
  }

  public override void DidBecomeMain(NSNotification notification) {
    UpdateSubtitle?.Invoke(this, Subtitle);
  }

  internal string Subtitle {
    get => subtitle;
    set {
      subtitle = value;
      UpdateSubtitle?.Invoke(this, value);
    }
  }
}
